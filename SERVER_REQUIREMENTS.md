# ğŸ–¥ï¸ PoÅ¾adavky na server pro AAS

## ğŸ“Š PÅ™ehled konfiguracÃ­

### ğŸŸ¡ MinimÃ¡lnÃ­ (testovÃ¡nÃ­, velmi malÃ½ provoz)
**PouÅ¾itÃ­:** TestovÃ¡nÃ­, demo, <50 nÃ¡vÅ¡tÄ›vnÃ­kÅ¯/den

| Parametr | Hodnota |
|----------|---------|
| **CPU** | 1 vCore |
| **RAM** | 2 GB |
| **Disk** | 20 GB SSD |
| **Bandwidth** | 1 TB/mÄ›sÃ­c |
| **Cena** | $5-10/mÄ›sÃ­c |

**VÃ½kon:**
- âœ… ZÃ¡kladnÃ­ funkce fungujÃ­
- âš ï¸ PomalÃ© nahrÃ¡vÃ¡nÃ­ obrÃ¡zkÅ¯
- âš ï¸ PÅ™eklad mÅ¯Å¾e bÃ½t pomalÃ½
- âŒ NepÅ¯jde Å¡kÃ¡lovat

### ğŸŸ¢ DoporuÄenÃ¡ (produkce, stÅ™ednÃ­ provoz)
**PouÅ¾itÃ­:** ProdukÄnÃ­ web, 50-500 nÃ¡vÅ¡tÄ›vnÃ­kÅ¯/den

| Parametr | Hodnota |
|----------|---------|
| **CPU** | 2 vCores |
| **RAM** | 4 GB |
| **Disk** | 50 GB SSD |
| **Bandwidth** | 2 TB/mÄ›sÃ­c |
| **Cena** | $15-25/mÄ›sÃ­c |

**VÃ½kon:**
- âœ… PlynulÃ½ chod aplikace
- âœ… RychlÃ© nahrÃ¡vÃ¡nÃ­ obrÃ¡zkÅ¯
- âœ… PÅ™eklad funguje dobÅ™e
- âœ… Prostor pro rÅ¯st
- âœ… MÅ¯Å¾ete mÃ­t 100-200 kolekcÃ­

### ğŸ”µ OptimÃ¡lnÃ­ (vysokÃ½ provoz)
**PouÅ¾itÃ­:** VelkÃ½ web, 500-2000 nÃ¡vÅ¡tÄ›vnÃ­kÅ¯/den

| Parametr | Hodnota |
|----------|---------|
| **CPU** | 4 vCores |
| **RAM** | 8 GB |
| **Disk** | 100 GB SSD |
| **Bandwidth** | 5 TB/mÄ›sÃ­c |
| **Cena** | $40-60/mÄ›sÃ­c |

**VÃ½kon:**
- âœ… ExcelentnÃ­ vÃ½kon
- âœ… ZvlÃ¡dne velkou zÃ¡tÄ›Å¾
- âœ… RychlÃ½ pÅ™eklad
- âœ… MÅ¯Å¾ete mÃ­t 500+ kolekcÃ­

---

## ğŸ’° DoporuÄenÃ­ poskytovatelÃ© VPS

### 1. DigitalOcean (nejpopulÃ¡rnÄ›jÅ¡Ã­)
**DoporuÄeno: Droplet 4GB RAM**
- **Cena:** $24/mÄ›sÃ­c
- **Parametry:** 2 vCPU, 4GB RAM, 80GB SSD, 4TB transfer
- **VÃ½hody:** 
  - SnadnÃ¡ administrace
  - VÃ½bornÃ¡ dokumentace
  - 1-click Docker install
  - Free backups snapshot
- **URL:** https://www.digitalocean.com/pricing/droplets

### 2. Hetzner (nejlevnÄ›jÅ¡Ã­, EU)
**DoporuÄeno: CX21**
- **Cena:** â‚¬5.83/mÄ›sÃ­c (~$6.50)
- **Parametry:** 2 vCPU, 4GB RAM, 40GB SSD, 20TB transfer
- **VÃ½hody:**
  - ExcelentnÃ­ cena/vÃ½kon
  - Datacentra v EU (GDPR friendly)
  - Velmi rychlÃ© SSD
- **NevÃ½hody:** 
  - MÃ©nÄ› znÃ¡mÃ½ mimo EU
- **URL:** https://www.hetzner.com/cloud

### 3. Vultr
**DoporuÄeno: High Frequency 2GB**
- **Cena:** $12/mÄ›sÃ­c
- **Parametry:** 1 vCPU, 2GB RAM, 55GB SSD, 2TB transfer
- **VÃ½hody:**
  - RychlÃ© NVMe SSD
  - GlobÃ¡lnÃ­ datacentra
  - HodinovÃ© ÃºÄtovÃ¡nÃ­
- **URL:** https://www.vultr.com/pricing/

### 4. Linode (Akamai)
**DoporuÄeno: Linode 4GB**
- **Cena:** $24/mÄ›sÃ­c
- **Parametry:** 2 vCPU, 4GB RAM, 80GB SSD, 4TB transfer
- **VÃ½hody:**
  - StabilnÃ­ dlouholetÃ¡ firma
  - DobrÃ¡ podpora
  - Backup systÃ©m
- **URL:** https://www.linode.com/pricing/

### 5. Contabo (nejlevnÄ›jÅ¡Ã­ velkÃ© servery)
**DoporuÄeno: Cloud VPS 2**
- **Cena:** â‚¬6.99/mÄ›sÃ­c (~$7.50)
- **Parametry:** 4 vCores, 6GB RAM, 100GB SSD, 32TB transfer
- **VÃ½hody:**
  - NejlepÅ¡Ã­ cena/vÃ½kon
  - HodnÄ› zdrojÅ¯ za mÃ¡lo penÄ›z
- **NevÃ½hody:**
  - HorÅ¡Ã­ podpora
  - PomalejÅ¡Ã­ sÃ­Å¥ neÅ¾ konkurence
- **URL:** https://contabo.com/en/vps/

---

## ğŸ¯ MÃ© doporuÄenÃ­

### Pro zaÄÃ¡tek (prvnÃ­ch 6 mÄ›sÃ­cÅ¯):
**Hetzner CX21** - â‚¬5.83/mÄ›sÃ­c
- SkvÄ›lÃ½ pomÄ›r cena/vÃ½kon
- 4GB RAM dostateÄnÃ¡
- EU lokace (rychlÃ© pro ÄŒR)
- MÅ¯Å¾ete upgradovat kdykoliv

### Pro dlouhodobÃ½ provoz:
**DigitalOcean 4GB Droplet** - $24/mÄ›sÃ­c
- StabilnÃ­ a spolehlivÃ©
- SkvÄ›lÃ¡ dokumentace
- JednoduchÃ© Å¡kÃ¡lovÃ¡nÃ­
- AutomatickÃ© backupy

### Pokud mÃ¡te malÃ½ budget:
**Vultr High Frequency 2GB** - $12/mÄ›sÃ­c
- StaÄÃ­ pro zaÄÃ¡tek
- RychlÃ© SSD
- MÅ¯Å¾ete upgradovat

---

## ğŸ“ˆ OÄekÃ¡vanÃ½ rÅ¯st disku

**ObrÃ¡zky** (hlavnÃ­ spotÅ™eba):
- PrÅ¯mÄ›rnÃ¡ kolekce: 5-10 obrÃ¡zkÅ¯
- PrÅ¯mÄ›rnÃ¡ velikost obrÃ¡zku: 2-5 MB
- 100 kolekcÃ­ Ã— 7 obrÃ¡zkÅ¯ Ã— 3 MB = ~2.1 GB

**DatabÃ¡ze:**
- 100 kolekcÃ­: ~50 MB
- 1000 kolekcÃ­: ~500 MB

**ZÃ¡lohy** (dennÃ­):
- 7 dennÃ­ch zÃ¡loh Ã— 2 GB = ~14 GB

**Celkem pro 100 kolekcÃ­:** ~20-25 GB  
**DoporuÄenÃ½ disk:** 50-80 GB

---

## ğŸ”§ Optimalizace vÃ½konu

### Pokud mÃ¡te jen 2GB RAM:

1. **Limitujte Docker kontejnery:**
```yaml
# docker-compose.prod.yml
services:
  web:
    deploy:
      resources:
        limits:
          memory: 1G
  db:
    deploy:
      resources:
        limits:
          memory: 512M
```

2. **Optimalizujte PostgreSQL:**
```bash
# V .env.production
DATABASE_URL=Host=db;Port=5432;Database=aas_production;Username=aasuser;Password=xxx;Maximum Pool Size=50;
```

3. **VypnÄ›te pÅ™eklad (pokud nepotÅ™ebujete):**
```bash
TRANSLATION_ENABLED=false
```

4. **Povolte swap:**
```bash
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

---

## ğŸ’¾ Optimalizace disku

### Pokud mÃ¡te jen 20GB disk:

1. **AutomatickÃ© ÄiÅ¡tÄ›nÃ­ Docker images:**
```bash
# PÅ™idejte do crontabu
0 4 * * 0 docker system prune -af --volumes
```

2. **Komprimujte starÃ© logy:**
```bash
# PÅ™idejte do crontabu
0 3 * * * find /opt/aas/logs -name "*.log" -mtime +7 -exec gzip {} \;
```

3. **Omezte poÄet zÃ¡loh:**
```bash
# V backup.sh zmÄ›Åˆte z 7 na 3
ls -t $BACKUP_DIR/aas_backup_*.tar.gz | tail -n +4 | xargs -r rm
```

4. **Optimalizujte velikost obrÃ¡zkÅ¯:**
PÅ™idejte do `ImageService.cs` resize na max 2000px Å¡Ã­Å™ku.

---

## ğŸŒ Latence podle lokace

**Server v EU (Frankfurt/Amsterdam):**
- ÄŒR: 10-20ms â­
- EU: 20-50ms
- USA: 100-150ms
- Asie: 200-300ms

**Server v USA (New York):**
- ÄŒR: 100-120ms
- EU: 80-120ms
- USA: 10-30ms â­
- Asie: 150-250ms

**DoporuÄenÃ­:** Pro ÄeskÃ© publikum volte EU server (Hetzner/DigitalOcean Frankfurt).

---

## ğŸ›ï¸ Monitoring spotÅ™eby

### Kontrola RAM:
```bash
free -h
docker stats
```

### Kontrola disku:
```bash
df -h
du -sh /opt/aas/wwwroot/uploads
```

### Kontrola CPU:
```bash
top
htop
```

---

## âš ï¸ Kdy upgradovat?

**Upgradn RAM pokud:**
- Aplikace crashuje s OOM (Out of Memory)
- `free -h` ukazuje <500MB free Äasto
- Swap je pouÅ¾Ã­vÃ¡n >50% Äasu

**UpgradnÄ›te CPU pokud:**
- Load average >2 (na 2 core serveru)
- PÅ™eklad trvÃ¡ >10 sekund
- StrÃ¡nky se naÄÃ­tajÃ­ >3 sekundy

**UpgradnÄ›te disk pokud:**
- VolnÃ© mÃ­sto <10GB
- ZÃ¡lohy selhÃ¡vajÃ­ kvÅ¯li mÃ­stu
- NemÅ¯Å¾ete nahrÃ¡t obrÃ¡zky

---

## ğŸ“ ZÃ¡vÄ›r

### ğŸ† NejlepÅ¡Ã­ volba pro vÃ¡Å¡ projekt:

**Hetzner CX21** (â‚¬5.83/mÄ›sÃ­c) nebo **DigitalOcean 4GB** ($24/mÄ›sÃ­c)

**ProÄ:**
- âœ… 4GB RAM staÄÃ­ na plynulÃ½ bÄ›h
- âœ… 2 CPU cores zvlÃ¡dnou zÃ¡tÄ›Å¾
- âœ… 40-80GB disku pro stovky kolekcÃ­
- âœ… SnadnÃ© upgrade kdyÅ¾ potÅ™ebujete
- âœ… SkvÄ›lÃ½ pomÄ›r cena/vÃ½kon

**ZaÄnÄ›te s Hetzner, pokud mÃ¡te malÃ½ budget.**  
**PÅ™ejdÄ›te na DigitalOcean, kdyÅ¾ chcete stabilitu a podporu.**

---

**PoznÃ¡mka:** VÅ¡echny ceny jsou orientaÄnÃ­ k listopadu 2024.
